{{ $translation := ( index $.Site.Data.translations .Site.Language.Lang ) }}
{{ $online_answer1 := replace $translation.register.online__answer1 "%link%" (partial "links/online-answer1-link.html" .) }}
{{ $online_answer2 := replace $translation.register.online__answer2 "%link%" (partial "links/online-answer2-link.html" .) }}

{{ $onlineDeadline := cond (ne .Params.online_deadline nil) .Params.online_deadline .Params.default_online_deadline }}
{{ $postmarkedDeadline := cond (ne .Params.mail_postmarked_deadline nil) .Params.mail_postmarked_deadline .Params.default_mail_postmarked_deadline }}
{{ $ipDeadline := cond (ne .Params.ip_deadline nil) .Params.ip_deadline .Params.default_ip_deadline }}

{{ $dates__electionday := $translation.register.dates__electionday }}
{{ if and (eq .Params.state_name "Louisiana") (ne $translation.register.dates__electionday_la nil) }}
{{ $dates__electionday = $translation.register.dates__electionday_la }}
{{ end }}
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [{
      "@type": "Question",
      "name": "{{ replace $translation.register.online__h2_question1 "%state_name%" .Params.state_name }}",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": {{ replace $online_answer1 "%state_name%" .Params.state_name | safeHTML }}
      }
    },{
        "@type": "Question",
        "name": "{{ replace $translation.register.online__h2_question2 "%state_name%" .Params.state_name }}",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": {{ replace $online_answer2 "%state_name%" .Params.state_name | safeHTML }}
      }
    },{
        "@type": "Question",
        "name": "{{ replace $translation.register.dates__heading "%state_name%" .Params.state_name }}",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "{{ replace $translation.register.dates__byonline_deadline "%online_deadline%" $onlineDeadline }}<br><br>{{ replace $translation.register.dates__bymail_deadline "%mail_postmarked_deadline%" $postmarkedDeadline }}<br><br>{{ replace $translation.register.dates__inperson_deadline "%ip_deadline%" $ipDeadline }}"
        }
      },{
        "@type": "Question",
        "name": "{{ replace $translation.register.dates__electionday_heading "%state_name%" .Params.state_name }}",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "{{ $dates__electionday }}"
        }
      }]
  }
</script>

<header>
  <h2>
    {{ replace $translation.register.online__h2_question1 "%state_name%" .Params.state_name }}
  </h2>
</header>
<p class="reg-link">
  {{ replace $online_answer1 "%state_name%" .Params.state_name | safeHTML }}
</p>
<p class="reg-link">
  {{ replace $online_answer2 "%state_name%" .Params.state_name | safeHTML }}
</p>
{{ partial "deadlines.html" . }}
